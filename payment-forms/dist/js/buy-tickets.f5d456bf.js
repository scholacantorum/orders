(function(t){function e(e){for(var r,s,o=e[0],u=e[1],c=e[2],d=0,m=[];d<o.length;d++)s=o[d],i[s]&&m.push(i[s][0]),i[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={"buy-tickets":0},a=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("a2b0")},"135e":function(t,e,n){"use strict";var r=n("2b0e"),i=n("9f7b");n("2dd8");r["default"].use(i["a"])},"1e9b":function(t,e,n){"use strict";var r=n("f7ff"),i=n.n(r);i.a},"23c60":function(t,e,n){"use strict";var r=n("d635"),i=n.n(r);i.a},"2a60":function(t,e,n){},"42f5":function(t,e,n){"use strict";var r=n("afa0"),i=n.n(r);i.a},6398:function(t,e,n){"use strict";var r=n("2a60"),i=n.n(r);i.a},"6f3f":function(t,e,n){"use strict";var r=n("ff6d"),i=n.n(r);i.a},7534:function(t,e,n){},"7aa3":function(t,e,n){},"905a":function(t,e,n){"use strict";var r=n("7aa3"),i=n.n(r);i.a},a2b0:function(t,e,n){"use strict";n.r(e);n("744f"),n("6095"),n("6c7b"),n("d25f"),n("7514"),n("20d6"),n("f3e2"),n("1c4c"),n("6762"),n("57e7"),n("2caf"),n("cadf"),n("9865"),n("6d67"),n("e804"),n("0cd8"),n("48f8"),n("759f"),n("55dd"),n("d04f"),n("78ce"),n("8ea5"),n("0298"),n("c8ce"),n("87b3"),n("d92a"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("8478"),n("4504"),n("fee7"),n("1c01"),n("58b2"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("4f37"),n("c66f"),n("262f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf"),n("0cdd");var r=n("2b0e"),i=(n("be3b"),n("135e"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.message?n("div",{domProps:{textContent:t._s(t.message)}}):t.products?n("div",[n("Dialog",{ref:"dialog",attrs:{ordersURL:t.ordersURL,products:t.products,stripeKey:t.stripeKey,title:t.title}}),n("b-btn",{attrs:{variant:"primary"},on:{click:t.onBuyTickets}},[t._v("Buy Tickets")])],1):t._e()}),a=[],s=n("a34a"),o=n.n(s),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"modal",attrs:{title:t.title,"no-close-on-backdrop":"","hide-footer":""},on:{shown:t.onShown,hide:t.onHide}},[t.orderID?n("Confirmation",{key:t.seq,attrs:{orderID:t.orderID},on:{close:t.onClose}}):n("OrderForm",{key:t.seq,ref:"form",attrs:{ordersURL:t.ordersURL,products:t.products,stripeKey:t.stripeKey},on:{success:t.onOrderSuccess,cancel:t.onClose,submitting:t.onSubmitting}})],1)},c=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("div",{attrs:{id:"connect-head"}},[t._v("Stay informed of Schola news!")]),n("div",[n("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.emailSpinner,expression:"emailSpinner"}],staticClass:"connect-done mt-1",attrs:{small:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.emailDone,expression:"emailDone"}],staticClass:"connect-done"},[t._v("✓")]),n("div",{staticClass:"connect-link",on:{click:t.onEmail}},[t._v("Subscribe to our email list")])],1),n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.facebookDone,expression:"facebookDone"}],staticClass:"connect-done"},[t._v("✓")]),n("div",{staticClass:"connect-link",on:{click:t.onFacebook}},[t._v("Follow us on Facebook")])]),n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.twitterDone,expression:"twitterDone"}],staticClass:"connect-done"},[t._v("✓")]),n("div",{staticClass:"connect-link",on:{click:t.onTwitter}},[t._v("Follow us on Twitter")])]),n("div",[n("b-btn",{attrs:{id:"connect-close",variant:"primary"},on:{click:function(e){return t.$emit("close")}}},[t._v("Close")])],1)])},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"ticket-confirm"}},[t._v("Thank you.  We have received your payment and emailed your\nticket. "),n("span",{attrs:{id:"ticket-reminder"}},[t._v("Please bring it with\nyou")]),t._v(" (printed or on phone) for admission.")])}];function m(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){m(a,r,i,s,o,"next",t)}function o(t){m(a,r,i,s,o,"throw",t)}s(void 0)})}}var p={props:{orderID:Number},data:function(){return{emailDone:!1,emailSpinner:!1,facebookDone:!1,twitterDone:!1}},methods:{onEmail:function(){var t=f(o.a.mark(function t(){var e;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.emailDone){t.next=2;break}return t.abrupt("return");case 2:return this.emailSpinner=!0,t.next=5,this.$axios.post("/backend/email-signup?order=".concat(this.orderID)).catch(function(t){return console.error(t),null});case 5:if(e=t.sent,this.emailSpinner=!1,e){t.next=9;break}return t.abrupt("return");case 9:e.status<400?this.emailDone=!0:console.error(e.statusText);case 10:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),onFacebook:function(){window.open("https://www.facebook.com/scholacantorum.org","_blank"),this.facebookDone=!0},onTwitter:function(){window.open("https://twitter.com/scholacantorum1","_blank"),this.twitterDone=!0}}},b=p,h=(n("6398"),n("2877")),y=Object(h["a"])(b,l,d,!1,null,null,null),v=y.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("OrderLines",{ref:"lines",attrs:{disabled:t.submitting,products:t.products,submitted:t.submitted},on:{lines:t.onLines}}),n("OrderPayment",{ref:"pmt",attrs:{send:t.onSend,stripeKey:t.stripeKey,total:t.total},on:{cancel:t.onCancel,submitted:t.onSubmitted,submitting:t.onSubmitting}})],1)},w=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0 mb-3",attrs:{fluid:""}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Ticket Quantities","label-sr-only":"",state:t.state,"invalid-feedback":"How many tickets do you want?"}},[n("table",{attrs:{id:"buy-tickets-form-quantities"}},t._l(t.lines,function(e){return n("OrderLinesQty",{key:e.product,ref:"qty",refInFor:!0,attrs:{name:e.productName,message:e.message,price:e.price,state:t.state,disabled:t.disabled},model:{value:e.quantity,callback:function(n){t.$set(e,"quantity",n)},expression:"ol.quantity"}})}),1)]),n("OrderLinesDonation",{attrs:{disabled:t.disabled},model:{value:t.donation,callback:function(e){t.donation=e},expression:"donation"}}),n("OrderLinesTotal",{attrs:{total:t.total}})],1)},x=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{attrs:{id:"buy-tickets-donation-row"}},[n("tr",[n("td",{attrs:{id:"buy-tickets-donation-label"}},[t._v("Add a donation to your order?")]),n("td",{attrs:{id:"buy-tickets-donation-amount-cell"}},[t._v("$"),n("b-form-input",{attrs:{id:"buy-tickets-donation-amount",value:t.value||"",disabled:t.disabled,type:"number",placeholder:"0",min:"0"},on:{input:function(e){t.$emit("input",Math.max(parseInt(e)||0),0)}}})],1)])])},P=[],C={props:{disabled:Boolean,value:Number}},S=C,$=(n("bb3d"),Object(h["a"])(S,_,P,!1,null,null,null)),O=$.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",{staticClass:"buy-tickets-qty-row"},[t.message?[n("td",{staticClass:"buy-tickets-qty-row-name",domProps:{textContent:t._s(t.name)}}),t.message?n("td",{staticClass:"buy-tickets-qty-row-message",attrs:{colspan:"4"},domProps:{textContent:t._s(t.message)}}):t._e()]:[n("td",{staticClass:"buy-tickets-qty-row-name",attrs:{colspan:"2"},domProps:{textContent:t._s(t.name)}}),n("td",{staticClass:"buy-tickets-qty-row-qty-cell"},[n("b-form-input",{ref:"input",staticClass:"buy-tickets-qty-row-qty",attrs:{value:t.value||"",state:t.state,disabled:t.disabled,type:"number",placeholder:"0",min:"0"},on:{input:function(e){t.$emit("input",Math.max(parseInt(e)||0),0)}}})],1),n("td",{staticClass:"buy-tickets-qty-row-price"},[t._v("×$"+t._s(t.price/100))]),n("td",{staticClass:"buy-tickets-qty-row-amount",domProps:{textContent:t._s(t.value?"$"+t.price*t.value/100:"")}})]],2)},R=[],D={props:{autofocus:Boolean,disabled:Boolean,message:String,name:String,price:Number,state:Boolean,value:Number},methods:{focus:function(){this.$refs.input.focus()},onQtyChange:function(t){this.$emit("input",parseInt(t.target.value)||0)}}},L=D,E=(n("6f3f"),Object(h["a"])(L,q,R,!1,null,null,null)),j=E.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"buy-tickets-form-total-row"}},[n("div",{attrs:{id:"buy-tickets-form-total"},domProps:{textContent:t._s("$"+t.total/100)}})])},T=[],N={props:{total:Number}},F=N,I=(n("42f5"),Object(h["a"])(F,A,T,!1,null,null,null)),B=I.exports;function M(t){return z(t)||K(t)||U()}function U(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function K(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function z(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var Z,H={components:{OrderLinesDonation:O,OrderLinesQty:j,OrderLinesTotal:B},props:{disabled:Boolean,products:Array,submitted:Boolean},data:function(){return{donation:0,lines:[]}},watch:{donation:"emitLines",hasOne:"emitLines",products:{immediate:!0,handler:"fillLines"}},computed:{hasOne:function(){return!!this.lines.some(function(t){return t.quantity})},state:function(){return!(this.submitted&&!this.hasOne)&&null},total:function(){return this.lines.reduce(function(t,e){return t+e.quantity*(e.price||0)},0)+100*this.donation}},methods:{emitLines:function(){this.hasOne?this.donation?this.$emit("lines",[].concat(M(this.lines),[{product:"donation",price:100*this.donation,quantity:1}])):this.$emit("lines",this.lines):this.$emit("lines",null)},fillLines:function(){var t=this;if(this.products){var e,n=0;this.lines=[],this.products.forEach(function(r){t.lines.push({product:r.id,productName:r.name,message:r.message,price:r.price,quantity:0}),r.message||(n++,e=t.lines[t.lines.length-1])}),1===n&&(e.quantity=1)}},focus:function(){this.$refs.qty[0].focus()}}},Q=H,J=(n("1e9b"),Object(h["a"])(Q,k,x,!1,null,null,null)),W=J.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:null!==t.canPR,expression:"canPR !== null"}],attrs:{id:"buy-tickets-form-payment"}},[t.canPR?n("div",{attrs:{id:"buy-tickets-form-use-pr-div"}},[n("label",{attrs:{id:"buy-tickets-form-use-pr-label",for:"buy-tickets-form-use-pr"}},[t._v("Use payment info saved "+t._s(t.deviceOrBrowser)+"?")]),n("b-form-checkbox",{attrs:{id:"buy-tickets-form-use-pr",switch:""},model:{value:t.usePR,callback:function(e){t.usePR=e},expression:"usePR"}})],1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.usePR,expression:"!usePR"}]},[n("b-form-group",{staticClass:"mb-1",attrs:{label:"Your name","label-sr-only":"",state:t.nameState,"invalid-feedback":"Please enter your name."}},[n("b-form-input",{attrs:{placeholder:"Your name",autocomplete:"name",disabled:t.submitting},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}})],1),n("b-form-group",{staticClass:"mb-1",attrs:{label:"Email address","label-sr-only":"",state:t.emailState,"invalid-feedback":t.email?"This is not a valid email address.":"Please enter your email address."}},[n("b-form-input",{attrs:{type:"email",placeholder:"Email address",autocomplete:"email",disabled:t.submitting},on:{focus:function(e){t.emailFocused=!0},blur:function(e){t.emailFocused=!1}},model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}})],1),n("b-form-group",{staticClass:"mb-1",attrs:{label:"Card number","label-sr-only":"",state:!t.cardError&&null,"invalid-feedback":t.cardError}},[n("div",{ref:"card",staticClass:"form-control",attrs:{id:"buy-tickets-form-card"}})])],1),n("div",{attrs:{id:"buy-tickets-form-footer"}},[t.message?n("div",{attrs:{id:"buy-tickets-form-message"},domProps:{textContent:t._s(t.message)}}):t._e(),n("div",{attrs:{id:"buy-tickets-form-buttons"}},[n("b-btn",{attrs:{type:"button",variant:"secondary",disabled:t.submitting},on:{click:t.onCancel}},[t._v("Cancel")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.usePR,expression:"usePR"}],ref:"prbutton",attrs:{id:"buy-tickets-form-prbutton"}}),!t.usePR&&t.submitting?n("b-btn",{attrs:{id:"buy-tickets-form-pay-now",type:"submit",variant:"primary",disabled:""}},[n("b-spinner",{staticClass:"mr-1",attrs:{small:""}}),t._v("Paying...")],1):t._e(),t.usePR||t.submitting?t._e():n("b-btn",{attrs:{id:"buy-tickets-form-pay-now",type:"submit",variant:"primary"}},[t._v("Pay "+t._s(t.total?"$"+t.total/100:"Now"))])],1)])])},G=[];function V(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}function X(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){V(a,r,i,s,o,"next",t)}function o(t){V(a,r,i,s,o,"throw",t)}s(void 0)})}}var tt={props:{send:Function,stripeKey:String,total:Number},data:function(){return{canPR:null,card:null,cardChange:null,cardFocus:!1,elements:null,email:"",emailFocused:!1,message:null,name:"",payreq:null,prbutton:null,submitted:!1,submitting:!1,usePR:!1}},mounted:function(){var t=X(o.a.mark(function t(){var e=this;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return Z||(Z=Stripe(this.stripeKey)),this.elements=Z.elements(),this.card=this.elements.create("card",{style:{base:{fontSize:"16px",lineHeight:1.5}}}),this.card.on("change",this.onCardChange),this.card.on("focus",function(){e.cardFocus=!0}),this.card.on("blur",function(){e.cardFocus=!1}),this.$nextTick(function(){e.card.mount(e.$refs.card)}),this.payreq=Z.paymentRequest({country:"US",currency:"usd",total:{label:"Schola Cantorum Ticket Order",amount:100,pending:!0},requestPayerName:!0,requestPayerEmail:!0}),t.next=10,this.payreq.canMakePayment();case 10:this.canPR=!!t.sent,this.canPR&&(this.usePR=!0,this.payreq.on("paymentmethod",this.onPaymentMethod),this.prbutton=this.elements.create("paymentRequestButton",{paymentRequest:this.payreq}),this.prbutton.on("click",this.onPRButtonClick),this.$nextTick(function(){e.prbutton.mount(e.$refs.prbutton)}));case 12:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:{cardError:function(){return this.cardChange&&this.cardChange.error?this.cardChange.error.message:this.submitted?!this.cardChange||this.cardChange.empty?"Please enter your card number.":this.cardFocus||this.cardChange.complete?null:"This card number is incomplete.":null},deviceOrBrowser:function(){var t=navigator.userAgent||navigator.vendor;return/android|ipad|iphone|ipod|windows phone/i.test(t)?"on device":"in browser"},emailState:function(){return!(!this.emailFocused&&this.email&&!this.email.match(/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/))&&(!(this.submitted&&!this.email)&&null)},nameState:function(){return(!this.submitted||""!=this.name)&&null}},watch:{submitted:function(){this.submitted&&this.$emit("submitted")},submitting:function(){this.$emit("submitting",this.submitting)},usePR:function(){this.submitted=!1}},methods:{onCancel:function(){this.$emit("cancel")},onCardChange:function(t){this.cardChange=t},onPaymentMethod:function(){var t=X(o.a.mark(function t(e){var n;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.submitting=!0,this.card.update({disabled:!0}),t.next=4,this.send({name:e.payerName,email:e.payerEmail,method:e.paymentMethod.id});case 4:n=t.sent,this.submitting=!1,this.card.update({disabled:!1}),n&&(this.message=n),e.complete(n?"fail":"success");case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onPRButtonClick:function(t){this.submitted=!0,this.message=null,null!==this.total?this.payreq.update({total:{label:"Schola Cantorum Ticket Order",amount:this.total,pending:!1}}):t.preventDefault()},submit:function(){var t=X(o.a.mark(function t(){var e,n,r,i;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(null!==this.canPR&&!this.usePR){t.next=2;break}return t.abrupt("return");case 2:if(this.submitted=!0,this.message=null,null!==this.total&&null===this.nameState&&null===this.emailState&&!this.cardError){t.next=6;break}return t.abrupt("return");case 6:return this.submitting=!0,this.card.update({disabled:!0}),t.next=10,Z.createPaymentMethod("card",this.card,{billing_details:{name:this.name,email:this.email}});case 10:if(e=t.sent,n=e.paymentMethod,r=e.error,!r){t.next=19;break}return console.error(r),this.submitting=!1,this.card.update({disabled:!1}),"card_error"===r.type||"validation_error"===r.type?this.message=r.message:this.message="We’re sorry, but we're unable to process payment cards at the moment.  Please try again later, or call our office at (650) 254-1700 to order by phone.",t.abrupt("return");case 19:return t.next=21,this.send({name:this.name,email:this.email,method:n.id});case 21:i=t.sent,this.submitting=!1,this.card.update({disabled:!1}),i&&(this.message=i);case 25:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},et=tt,nt=(n("905a"),Object(h["a"])(et,Y,G,!1,null,null,null)),rt=nt.exports;function it(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}function at(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){it(a,r,i,s,o,"next",t)}function o(t){it(a,r,i,s,o,"throw",t)}s(void 0)})}}var st={components:{OrderLines:W,OrderPayment:rt},props:{ordersURL:String,products:Array,stripeKey:String},data:function(){return{lines:null,submitted:!1,submitting:!1}},computed:{total:function(){return this.lines?this.lines.reduce(function(t,e){return t+e.quantity*(e.price||0)},0):null}},watch:{submitting:function(){this.$emit("submitting",this.submitting)}},methods:{onCancel:function(){this.$emit("cancel")},onLines:function(t){this.lines=t},onSubmit:function(){this.$refs.pmt.submit()},onSubmitted:function(){this.submitted=!0},onSubmitting:function(t){this.submitting=t},onSend:function(){var t=at(o.a.mark(function t(e){var n,r,i,a;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.name,r=e.email,i=e.method,t.next=3,this.$axios.post("".concat(this.ordersURL,"/api/order"),JSON.stringify({source:"public",name:n,email:r,lines:this.lines.filter(function(t){return t.quantity&&!t.message}).map(function(t){return{product:t.product,quantity:t.quantity,price:t.price}}),payments:[{type:"card",method:i,amount:this.total}]})).catch(function(t){return t});case 3:if(a=t.sent,!(a&&a.data&&a.data.id)){t.next=7;break}return this.$emit("success",a.data.id),t.abrupt("return",null);case 7:if(!(a&&a.data&&a.data.error)){t.next=9;break}return t.abrupt("return",a.data.error);case 9:return console.error(a),t.abrupt("return","We’re sorry, but we're unable to process payment cards at the moment.  Please try again later, or call our office at (650) 254-1700 to order by phone.");case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),setAutoFocus:function(){this.$refs.lines.focus()}}},ot=st,ut=(n("23c60"),Object(h["a"])(ot,g,w,!1,null,null,null)),ct=ut.exports,lt={components:{Confirmation:v,OrderForm:ct},props:{ordersURL:String,products:Array,stripeKey:String,title:String},data:function(){return{orderID:null,seq:0,submitting:!1}},methods:{onClose:function(){this.$refs.modal.hide()},onHide:function(t){this.submitting&&t.preventDefault()},onOrderSuccess:function(t){this.orderID=t,this.submitting=!1},onShown:function(){this.$refs.form.setAutoFocus()},onSubmitting:function(t){this.submitting=t},show:function(){this.seq++,this.orderID=null,this.$refs.modal.show()}}},dt=lt,mt=Object(h["a"])(dt,u,c,!1,null,null,null),ft=mt.exports;function pt(t){return pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function bt(t,e,n,r,i,a,s){try{var o=t[a](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,i)}function ht(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function s(t){bt(a,r,i,s,o,"next",t)}function o(t){bt(a,r,i,s,o,"throw",t)}s(void 0)})}}var yt={props:{ordersURL:String,productIDs:Array,stripeKey:String,title:String},components:{Dialog:ft},data:function(){return{coupon:"",couponMatch:!0,message:null,products:null}},mounted:function(){var t=ht(o.a.mark(function t(){var e,n;return o.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=new URLSearchParams,this.productIDs.forEach(function(t){e.append("p",t)}),t.prev=2,t.next=5,this.$axios({method:"GET",url:"".concat(this.ordersURL,"/api/prices"),params:e});case 5:n=t.sent.data,t.next=12;break;case 8:return t.prev=8,t.t0=t["catch"](2),console.error(t.t0),t.abrupt("return");case 12:"string"===typeof n&&(this.message=n),"object"===pt(n)&&(this.products=n.products,this.couponMatch=n.coupon);case 14:case"end":return t.stop()}},t,this,[[2,8]])}));function e(){return t.apply(this,arguments)}return e}(),methods:{onBuyTickets:function(){this.$refs.dialog.show()}}},vt=yt,gt=Object(h["a"])(vt,i,a,!1,null,null,null),wt=gt.exports;r["default"].config.productionTip=!1,window.addEventListener("load",function(){var t=document.getElementsByClassName("buy-tickets"),e=function(){var e=t[0],n=e.getAttribute("data-products").split(" ");new r["default"]({render:function(t){return t(wt,{props:{ordersURL:e.getAttribute("data-orders-url"),productIDs:n,stripeKey:e.getAttribute("data-stripe-key"),title:e.getAttribute("data-title")}})}}).$mount(e)};while(t.length)e()})},afa0:function(t,e,n){},bb3d:function(t,e,n){"use strict";var r=n("7534"),i=n.n(r);i.a},be3b:function(t,e,n){"use strict";var r=n("2b0e"),i=n("bc3a"),a=n.n(i),s={},o=a.a.create(s);o.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)}),o.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)}),Plugin.install=function(t){t.axios=o,window.axios=o,Object.defineProperties(t.prototype,{axios:{get:function(){return o}},$axios:{get:function(){return o}}})},r["default"].use(Plugin);Plugin},d635:function(t,e,n){},f7ff:function(t,e,n){},ff6d:function(t,e,n){}});
//# sourceMappingURL=buy-tickets.f5d456bf.js.map